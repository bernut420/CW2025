<?import com.comp2042.GameOverPanel?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.Group?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.text.Text?>
<?import java.net.URL?>

<StackPane fx:id="gameContainer" fx:controller="com.comp2042.GuiController"
           xmlns:fx="http://javafx.com/fxml"
           style="-fx-background-color: #1a1a1a;">
    <Pane fx:id="scalingContainer" prefWidth="480" prefHeight="640">

        <!-- Control buttons in top left -->
        <HBox spacing="10" layoutX="30" layoutY="10">
            <Button fx:id="pauseButton" text="Pause" onAction="#pauseGame"
                    style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-pref-width: 80; -fx-pref-height: 30; -fx-background-color: #FF9800; -fx-text-fill: white;"/>
            <Button fx:id="restartButton" text="Restart" onAction="#newGame"
                    style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-pref-width: 80; -fx-pref-height: 30; -fx-background-color: #2196F3; -fx-text-fill: white;"/>
        </HBox>

        

        <!-- Main playfield border - main -->
        <Rectangle fx:id="gameBorder"
                   layoutX="30" layoutY="60"
                   width="220" height="520"
                   fill="transparent"
                   stroke="#4a90e2"
                   strokeWidth="4"
                   arcWidth="8"
                   arcHeight="8"/>

        <!-- Game Area -->
        <GridPane fx:id="gamePanel" hgap="1" vgap="1" layoutX="32" layoutY="62"/>

        <!-- Ghost brick overlay (shows landing position) -->
        <GridPane fx:id="ghostPanel" hgap="1" vgap="1" layoutX="32" layoutY="62"/>

        <!-- Active brick overlay -->
        <GridPane fx:id="brickPanel" hgap="1" vgap="1" layoutX="32" layoutY="62"/>

        <!-- Right-side HUD panel - outer glow -->
        <Rectangle fx:id="hudBorderOuter"
                   layoutX="298" layoutY="58"
                   width="164" height="404"
                   fill="transparent"
                   stroke="#a89fc0"
                   strokeWidth="2"
                   arcWidth="8"
                   arcHeight="8"/>
        
        <!-- Right-side HUD panel - main -->
        <Rectangle fx:id="hudBorder"
                   layoutX="300" layoutY="60"
                   width="160" height="400"
                   fill="transparent"
                   stroke="#8b7fa8"
                   strokeWidth="3"
                   arcWidth="6"
                   arcHeight="6"/>
        

        <!-- HUD content -->
        <VBox spacing="20" layoutX="310" layoutY="70" prefWidth="140" alignment="CENTER">
            <!-- Score / Level / Lines -->
            <VBox spacing="5" alignment="CENTER">
                <Label fx:id="scoreLabel" text="Score: 0"
                       style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                <Label fx:id="levelLabel" text="Level: 1"
                       style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                <Label fx:id="linesLabel" text="Lines: 0"
                       style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: white;"/>
            </VBox>

            <!-- Hold Section -->
            <VBox spacing="5" alignment="CENTER" prefWidth="140">
                <Label text="Hold"
                       style="-fx-font-size: 16px; -fx-text-fill: white; -fx-font-weight: bold;"/>
                <HBox alignment="CENTER">
                    <GridPane fx:id="holdBlockPanel" hgap="1" vgap="1" alignment="CENTER"/>
                </HBox>
            </VBox>

            <!-- Next Section -->
            <VBox spacing="5" alignment="CENTER" prefWidth="140">
                <Label text="Next"
                       style="-fx-font-size: 16px; -fx-text-fill: white; -fx-font-weight: bold;"/>
                <HBox alignment="CENTER">
                    <GridPane fx:id="nextBlockPanel" hgap="1" vgap="1" alignment="CENTER"/>
                </HBox>
            </VBox>
        </VBox>

        <!-- Notifications and Game Over -->
        <Group fx:id="groupNotification" layoutX="14" layoutY="220">
            <VBox alignment="CENTER">
                <GameOverPanel fx:id="gameOverPanel"/>
            </VBox>
        </Group>
    </Pane>

    <!-- Start Screen -->
    <VBox fx:id="startScreen" alignment="CENTER" spacing="30" style="-fx-background-color: rgba(26, 26, 26, 0.95);">
        <Label text="TETRIS" style="-fx-font-size: 48px; -fx-font-weight: bold; -fx-text-fill: white; -fx-padding: 0 0 40 0;"/>
        <Button fx:id="playButton" text="Play" onAction="#startGame"
                style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-pref-width: 200; -fx-pref-height: 50; -fx-background-color: #4CAF50; -fx-text-fill: white;"/>
        <Button fx:id="exitButton" text="Exit" onAction="#exitGame"
                style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-pref-width: 200; -fx-pref-height: 50; -fx-background-color: #f44336; -fx-text-fill: white;"/>
    </VBox>

    <stylesheets>
        <URL value="@window_style.css"/>
    </stylesheets>
</StackPane>
